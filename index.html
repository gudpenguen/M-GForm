<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>

    <title>Meet & Greet Reservation Form</title>

    <!-- External Libraries -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.23/jspdf.plugin.autotable.min.js"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">
    <script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
    
    <style>
        body {
            font-family: 'Montserrat', sans-serif;
            line-height: 1.6;
            margin: 0;
            padding: 20px;
            background-image: url('https://www.igapass.com/_ui/responsive/common/images/template/bg-0001.jpg');
            background-size: cover;
            background-position: center;
            background-repeat: no-repeat;
            background-attachment: fixed;
            color: #FFFFFF;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
        }

        .container {
            width: 100%;
            max-width: 800px;
            background: linear-gradient(135deg, #D4B595 0%, #9B7B5B 50%);
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 4px 1000px rgba(0, 0, 0, 10);
            border: 0px solid #C4A484;
            box-sizing: border-box;
            position: relative;
        }

        .header-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            margin-bottom: 1px;
            text-align: center;
        }

        .logo {
            max-width: 300px;
            height: auto;
            margin-bottom: 1px;
            margin-left: 60px;
            object-fit: contain;
        }

        .form-title {
            font-family: 'Montserrat', sans-serif;
            color: #FFFFFF;
            font-size: 24px;
            font-weight: 500;
            letter-spacing: 1px;
            margin: 0;
            margin-bottom: 0px;
            padding-top: 10px;
            padding-bottom: 1px;
        }

        form {
            display: flex;
            flex-direction: column;
            gap:1px;
        }

        .form-section {
            padding: 15px;
            margin-bottom: 8px;
            flex-grow: 1;
        }

        .form-section h2 {
            margin-top: 0;
            font-size: 18px;
            border-bottom: 1px solid #DCC7B7;
            padding-bottom: 1px;
            color: #FFFFFF;
        }

        .form-row {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
            flex-wrap: wrap;
        }

        .form-group {
            flex: 1;
            margin-right: 10px;
            min-width: 200px;
        }

        .form-group:last-child {
            margin-right: 0;
        }

        label {
            font-weight: 500;
            display: block;
            margin-bottom: 5px;
            color: #FFFFFF;
        }

        input, select, textarea {
            width: 100%;
            padding: 8px;
            border: 1px solid #FFFF;
            border-radius: 4px;
            font-size: 14px;
            background-color: #FFFFFF;
            color: #000000;
            box-sizing: border-box;
            box-shadow: 0 0px 3px rgba(5, 5, 5, 10);
        }

        .checkbox-group {
            display: flex;
            align-items: center;
            margin-bottom: 10px;
        }

        .checkbox-group input[type="checkbox"] {
            width: auto;
            margin-right: 5px;
        }

        .button-container {
            display: flex;
            justify-content: center;
            gap: 50px;
            margin-top: 20px;
        }

        button {
            background-color: #FFFFFF;
            color: #002045;
            padding: 10px 15px;
            border: none;
            border-radius: 3px;
            cursor: pointer;
            font-size: 16px;
            box-shadow: 0 2px 9px rgba(5, 5, 5, 10);
        }

        button:hover:enabled {
            background-color: #cc9d78;
        }

        button:disabled {
            background-color: #4a4a4a;
            color: #999999;
            cursor: not-allowed;
        }

        .reset-button {
            background-color: #4a4a4a;
            color: #999999;
            cursor: not-allowed;
        }

        .reset-button.active {
            background-color: #FFFFFF;
            color: #002045;
            cursor: pointer;
        }

        .reset-button.active:hover {
            background-color: #D0AE93;
        }

        .hidden {
            display: none;
        }

        .info-text {
            font-size: 12px;
            color: #FFFFFFF;
            margin-top: 5px;
        }

        .special-requests .checkbox-group {
            width: 50%;
        }

        .language-selector {
            position: absolute;
            top: 10px;
            right: 10px;
            z-index: 1000;
        }

        .language-selector select {
            padding: 5px;
            font-size: 14px;
            background-color: #FFFFFF;
            color: #000000;
            border: 1px solid #000000;
            cursor: pointer;
        }

        .instructions {
            font-size: 14px;
            margin-bottom: 20px;
            white-space: pre-wrap;
            line-height: 1.6;
        }

        .highlighted {
            font-weight: bold;
            background-color: D0AE93;
            color: black;
        }

        .account-number-container {
            margin-top: 10px;
        }

        .account-number-input {
            width: 100%;
            padding: 8px;
            border: 1px solid #D0AE93;
            background-color: #FFFFFF;
            color: #000000;
            box-sizing: border-box;
        }

        .tab-container {
            display: flex;
            margin-bottom: 7px;
            border: 1px solid #D0AE93;
            border-radius: 2px;
            overflow: hidden;
            width: 100%;
            box-shadow: 0 0px 3px rgba(5, 5, 5, 10);
        }

        .tab-button {
            flex: 1;
            padding: 6px;
            background-color: #FFFFFF;
            color: #000000;
            border: none;
            border-radius: 1px;
            cursor: pointer;
            transition: background-color 0.3s;
        }

        .tab-button.active {
            background-color: #D0AE93;
        }

        .tab-button:hover {
            background-color: #D0AE93;
        }

        .tab-content {
            display: none;
            width: 100%;
        }

        .tab-content.active {
            display: block;
        }

        .confirmation-container {
            margin-top: 20px;
        }

        .confirmation-container .checkbox-group {
            margin-bottom: 0;
        }
    </style>
</head>
<body>
    <div class="container">

        <div class="language-selector">
            <select id="languageSelect">
                <option value="tr">TR</option>
                <option value="en">EN</option>
            </select>
        </div>

        <div class="header-container">
            <img src="https://igapass.com/medias/?context=bWFzdGVyfGltYWdlc3w3NzM0fGltYWdlL3BuZ3xpbWFnZXMvaGM1L2hlMi85MDEyNTIwNzQ3MDM4LnBuZ3w3OWFmMzBiYjNmZjJiYWMxMGQ0ZDZiNTQ2Nzk3YzVmYjgzMDI4OGYwYmNiOTBiY2NmMTRmYzU3ZGE0NjRhMzUx" 
                 alt="Meet & Greet Logo" 
                 class="logo">
            <p class="form-title" id="formTitle"></p>
        </div>

        <form id="reservationForm">
            <!-- Guest Information -->
            <div class="form-section">
                <h2 id="guestInfoTitle"></h2>
                <div class="form-group">
                    <label id="guestNameLabel" for="guestName"></label>
                    <input type="text" id="guestName" name="guestName" required>
                </div>
            </div>

            <!-- Flight Information -->
            <div class="form-section">
                <h2 id="flightInfoTitle"></h2>
                <div class="form-row">
                    <div class="form-group">
                        <label id="serviceTypeLabel" for="serviceType"></label>
                        <select id="serviceType" name="serviceType" required>
                            <option value="">{SelectServiceType}</option>
                            <option value="arrival">Arrival</option>
                            <option value="departure">Departure</option>
                            <option value="transit">Transit</option>
                        </select>
                    </div>
                </div>
                <div id="arrivalInfo" class="hidden">
                    <div class="form-row">
                        <div class="form-group">
                            <label id="arrivalServiceDateLabel" for="arrivalServiceDate"></label>
                            <input type="text" id="arrivalServiceDate" name="arrivalServiceDate" placeholder="dd.mm.yyyy">
                            <p class="info-text" id="arrivalInfoText"></p>
                        </div>
                        <div class="form-group">
                            <label id="arrivalFlightCodeLabel" for="arrivalFlightCode"></label>
                            <input type="text" id="arrivalFlightCode" name="arrivalFlightCode" placeholder="E.g. TK1234">
                        </div>
                    </div>
                </div>
                <div id="departureInfo" class="hidden">
                    <div class="form-row">
                        <div class="form-group">
                            <label id="departureServiceDateLabel" for="departureServiceDate"></label>
                            <input type="text" id="departureServiceDate" name="departureServiceDate" placeholder="dd.mm.yyyy">
                        </div>
                        <div class="form-group">
                            <label id="departureFlightCodeLabel" for="departureFlightCode"></label>
                            <input type="text" id="departureFlightCode" name="departureFlightCode" placeholder="E.g. TK1234">
                        </div>
                    </div>
                </div>
            </div>

            <!-- Number of Guests -->
            <div class="form-section passenger-info">
                <h2 id="numberGuestsTitle"></h2>
                <div class="form-row">
                    <div class="form-group">
                        <label id="adultCountLabel" for="adultCount"></label>
                        <input type="number" id="adultCount" name="adultCount" min="0" max="1000">
                    </div>
                    <div class="form-group">
                        <label id="seniorCountLabel" for="seniorCount"></label>
                        <input type="number" id="seniorCount" name="seniorCount" min="0" max="1000">
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label id="childCountLabel" for="childCount"></label>
                        <input type="number" id="childCount" name="childCount" min="0" max="1000">
                    </div>
                    <div class="form-group">
                        <label id="infantCountLabel" for="infantCount"></label>
                        <input type="number" id="infantCount" name="infantCount" min="0" max="1000">
                    </div>
                </div>
            </div>

            <!-- Special Requests -->
            <div class="form-section special-requests">
                <h2 id="specialRequestsTitle"></h2>
                <div class="form-row">
                    <div class="checkbox-group">
                        <input type="checkbox" id="flowerGreeting" name="flowerGreeting">
                        <label id="flowerGreetingLabel" for="flowerGreeting"></label>
                    </div>
                    <div class="checkbox-group">
                        <input type="checkbox" id="cityTransfer" name="cityTransfer">
                        <label id="cityTransferLabel" for="cityTransfer"></label>
                    </div>
                </div>
                <div class="form-row">
                    <div class="checkbox-group">
                        <input type="checkbox" id="logoGreeting" name="logoGreeting">
                        <label id="logoGreetingLabel" for="logoGreeting"></label>
                    </div>
                    <div class="checkbox-group">
                        <input type="checkbox" id="gatTransfer" name="gatTransfer">
                        <label id="gatTransferLabel" for="gatTransfer"></label>
                    </div>
                </div>
                <div id="cityTransferInfo" class="hidden">
                    <div class="form-row">
                        <div class="form-group">
                            <label id="pickupDateLabel" for="pickupDate"></label>
                            <input type="text" id="pickupDate" name="pickupDate" placeholder="dd.mm.yyyy">
                        </div>
                        <div class="form-group">
                            <label id="pickupTimeLabel" for="pickupTime"></label>
                            <input type="time" id="pickupTime" name="pickupTime">
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label id="pickupAddressLabel" for="pickupAddress"></label>
                            <textarea id="pickupAddress" name="pickupAddress" rows="3"></textarea>
                        </div>
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label id="otherRequestsLabel" for="otherRequests"></label>
                        <textarea id="otherRequests" name="otherRequests" rows="3"></textarea>
                    </div>
                </div>
            </div>

            <!-- Contact Information -->
            <div class="form-section">
                <h2 id="contactInfoTitle"></h2>
                <div class="form-row">
                    <div class="form-group">
                        <label id="authorizedPersonLabel" for="authorizedPerson"></label>
                        <input type="text" id="authorizedPerson" name="authorizedPerson">
                    </div>
                    <div class="form-group">
                        <label id="authorizedNumberLabel" for="authorizedNumber"></label>
                        <input type="tel" id="authorizedNumber" name="authorizedNumber">
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label id="driverNameLabel" for="driverName"></label>
                        <input type="text" id="driverName" name="driverName">
                    </div>
                    <div class="form-group">
                        <label id="driverNumberLabel" for="driverNumber"></label>
                        <input type="tel" id="driverNumber" name="driverNumber">
                    </div>
                </div>
                <p class="info-text" id="contactInfoNote"></p>
            </div>

            <!-- Invoice Information -->
            <div class="form-section" id="invoiceInfoSection">
                <h2 id="invoiceInfoTitle"></h2>
                <div class="tab-container">
                    <button type="button" class="tab-button active" data-tab="individual">Individual</button>
                    <button type="button" class="tab-button" data-tab="corporate">Corporate</button>
                </div>
                <div id="individualTab" class="tab-content active">
                    <div class="form-row">
                        <div class="form-group">
                            <label id="individualNameLabel" for="individualName"></label>
                            <input type="text" id="individualName" name="individualName">
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label id="identityNumberLabel" for="identityNumber"></label>
                            <input type="text" id="identityNumber" name="identityNumber">
                        </div>
                    </div>
                </div>
                <div id="corporateTab" class="tab-content">
                    <div class="form-row">
                        <div class="form-group">
                            <label id="invoiceNameLabel" for="invoiceName"></label>
                            <input type="text" id="invoiceName" name="invoiceName">
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label id="taxOfficeLabel" for="taxOffice"></label>
                            <input type="text" id="taxOffice" name="taxOffice">
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label id="taxNumberLabel" for="taxNumber"></label>
                            <input type="text" id="taxNumber" name="taxNumber">
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label id="invoiceAddressLabel" for="invoiceAddress"></label>
                            <textarea id="invoiceAddress" name="invoiceAddress" rows="3"></textarea>
                        </div>
                    </div>
                </div>
                <div class="form-row">
                    <div class="checkbox-group">
                        <input type="checkbox" id="hasAccountNumber" name="hasAccountNumber">
                        <label id="hasAccountNumberLabel" for="hasAccountNumber"></label>
                    </div>
                </div>
                <div id="accountNumberContainer" class="account-number-container" style="display: none;">
                    <label id="accountNumberInputLabel" for="accountNumber"></label>
                    <input type="number" id="accountNumber" name="accountNumber" class="account-number-input">
                </div>
            </div>
        </form>

        <div class="instructions" id="instructionsText"></div>

        <!-- Confirmation Checkbox -->
        <div class="confirmation-container">
            <div class="checkbox-group">
                <input type="checkbox" id="confirmationCheckbox">
                <label id="confirmationTextLabel" for="confirmationCheckbox"></label>
            </div>
        </div>

        <div class="button-container">
            <button type="button" id="pdfButton" disabled></button>
            <button type="button" id="resetButton" class="reset-button"></button>
        </div>
    </div>

    <script>
        // Translations for TR and EN
        const translations = {
            tr: {
                formTitle: "REZERVASYON FORMU",
                guestInfoTitle: "MİSAFİR BİLGİLERİ",
                guestNameLabel: "Misafirlerimizin Adı & Soyadı:",
                flightInfoTitle: "UÇUŞ BİLGİLERİ",
                serviceTypeLabel: "Hizmet Türü:",
                selectServiceType: "Seçiniz",
                arrivalServiceDateLabel: "Gelen Hizmet Tarihi:",
                arrivalInfoText: "*Uçağınızın İstanbul Havalimanına İNİŞ tarihini yazmanızı rica ederiz.",
                arrivalFlightCodeLabel: "Gelen Uçuş Kodu:",
                departureServiceDateLabel: "Giden Uçuş Tarihi:",
                departureFlightCodeLabel: "Giden Uçuş Kodu:",
                numberGuestsTitle: "MİSAFİR SAYISI",
                adultCountLabel: "Yetişkin Sayısı:",
                seniorCountLabel: "65+ Yaş Misafir Sayısı:",
                childCountLabel: "Çocuk Sayısı (7-12 yaş):",
                infantCountLabel: "Bebek Sayısı (0-6 yaş):",
                specialRequestsTitle: "ÖZEL İSTEKLER VE İHTİYAÇLAR",
                flowerGreetingLabel: "Çiçek ile karşılama",
                cityTransferLabel: "Şehir İçi Transfer",
                logoGreetingLabel: "Logo ile karşılama",
                gatTransferLabel: "GHT Transfer",
                pickupDateLabel: "Alınma Tarihi:",
                pickupTimeLabel: "Alınma Saati:",
                pickupAddressLabel: "Adres:",
                otherRequestsLabel: "Diğer İstekler:",
                contactInfoTitle: "İRTİBAT BİLGİLERİ",
                authorizedPersonLabel: "İrtibat Kişisi:",
                authorizedNumberLabel: "İrtibat Kişisi Numarası:",
                driverNameLabel: "Şoför Adı:",
                driverNumberLabel: "Şoför Numarası:",
                contactInfoNote: "*Giden hizmet türünde buluşma sağlanabilmesi için kontak numarası gerekmektedir.",
                invoiceInfoTitle: "FATURA BİLGİLERİ",
                individualNameLabel: "Ad & Soyad:",
                identityNumberLabel: "Kimlik Numarası:",
                invoiceNameLabel: "Fatura Adı:",
                taxOfficeLabel: "Vergi Dairesi:",
                taxNumberLabel: "Vergi Numarası:",
                invoiceAddressLabel: "Fatura Adresi:",
                hasAccountNumberLabel: "Tarafınızca oluşturulmuş cari numaramız bulunuyor.",
                accountNumberInputLabel: "Cari Numarası:",
                instructionsText:
`Kaydedilen PDF dosyası resevation@igapass.com e-mail adresine gönderilmelidir.

Dikkat: Formu doldurmadan önce aşağıda paylaşılan talimatları dikkatlice okumanızı rica ederiz.

1. Arrival: Hizmetlerde ilgili satıra İstanbul Havalimanı'na uçuşun varış tarihi yazılacaktır. Biletinizde her zaman uçağın İstanbul Havalimanı'na geliş tarihine ve saatine dikkat etmenizi rica ederiz.
2. Departure: Hizmetimizde ilgili satıra uçağın kalkış tarihi yazılacaktır. Departure hizmetlerinde, asistanımızın şoför/yolcu ile iletişime geçmesi gerekmektedir.
3. Transit: Hizmetimizde, ek olarak devam uçuşu kısmını doldurmanızı rica ederiz.
4. IGA Meet & Greet servisi: 0-6 yaş arası çocuklar ücretsiz, 7-12 yaş arası çocuklar için %50, 65 yaş ve üzeri yetişkinler için %35 indirimlidir. İndirim için pasaport görselini paylaşınız.
5. Board to Board (Transfer) rezervasyonlarında iki uçuş arası 90 dakikadan az ise Taya Yolcu Hizmetleri sorumlu tutulamaz.
6. Her uçuş ayrı bir rezervasyondur. Tarih, uçuş ve kişi farklı ise yeni rezervasyon oluşturulmalıdır.
7. Taya Yolcu Hizmetleri A.Ş. formda belirtilen kontak ve şoför numarası dışında başka numara ile iletişime geçmekle yükümlü değildir.`,
                pdfButton: "PDF Olarak Kaydet",
                resetButton: "Yeni Rezervasyon Oluştur",
                confirmationText: "Girişini yapmış olduğum bütün bilgilerin doğruluğunu onaylıyorum. Bilgi eksikliği veya yanlış giriş yapılmasından kaynaklı oluşabilecek her aksaklık bütün sorumluluğuyla tarafıma aittir."
            },
            en: {
                formTitle: "RESERVATION FORM",
                guestInfoTitle: "GUEST INFORMATION",
                guestNameLabel: "Guest Name & Surname:",
                flightInfoTitle: "FLIGHT INFORMATION",
                serviceTypeLabel: "Service Type:",
                selectServiceType: "Select",
                arrivalServiceDateLabel: "Arrival Service Date:",
                arrivalInfoText: "*Please enter the date your flight LANDS at Istanbul Airport.",
                arrivalFlightCodeLabel: "Arrival Flight Code:",
                departureServiceDateLabel: "Departure Flight Date:",
                departureFlightCodeLabel: "Departure Flight Code:",
                numberGuestsTitle: "NUMBER OF GUESTS",
                adultCountLabel: "Number of Adults:",
                seniorCountLabel: "Number of Senior Guests (65+):",
                childCountLabel: "Number of Children (7-12 years):",
                infantCountLabel: "Number of Infants (0-6 years):",
                specialRequestsTitle: "SPECIAL REQUESTS AND NEEDS",
                flowerGreetingLabel: "Greeting with Flower",
                cityTransferLabel: "City Transfer",
                logoGreetingLabel: "Greeting with Logo",
                gatTransferLabel: "GAT Transfer",
                pickupDateLabel: "Pick-up Date:",
                pickupTimeLabel: "Pick-up Time:",
                pickupAddressLabel: "Address:",
                otherRequestsLabel: "Other Requests:",
                contactInfoTitle: "CONTACT INFORMATION",
                authorizedPersonLabel: "Contact Person:",
                authorizedNumberLabel: "Contact Person's Number:",
                driverNameLabel: "Driver's Name:",
                driverNumberLabel: "Driver's Number:",
                contactInfoNote: "*A contact number is required to arrange a meeting for departure service types.",
                invoiceInfoTitle: "INVOICE INFORMATION",
                individualNameLabel: "Name & Surname:",
                identityNumberLabel: "Identity Number:",
                invoiceNameLabel: "Invoice Name:",
                taxOfficeLabel: "Tax Office:",
                taxNumberLabel: "Tax Number:",
                invoiceAddressLabel: "Invoice Address:",
                hasAccountNumberLabel: "We have an account number created by you.",
                accountNumberInputLabel: "Account Number:",
                instructionsText:
`The saved PDF file should be sent to the email address resevation@igapass.com.

Attention: Please carefully read the instructions shared below before filling out the form.

1. Arrival: The arrival date of the flight to Istanbul Airport should be written in the relevant row for services. Pay attention to your ticket's arrival date/time.
2. Departure: The departure date of the flight should be written in the relevant row. For departure services, our assistant needs to contact the driver/passenger. Otherwise, meeting point/time can't be determined.
3. Transit: For our service, please fill in the connecting flight section.
4. IGA Meet & Greet service: Free for children aged 0-6, 50% discount for children aged 7-12, and 35% discount for adults aged 65 and over. Please share a passport image for the discount.
5. Board to Board (Transfer): If less than 90 mins between flights, Taya Passenger Services is not responsible if the guest misses the connection.
6. Each flight is a separate reservation. If date, flight, or person differs (unless traveling together), a new reservation is required.
7. The authorized officer of Taya Passenger Services Inc. is not obliged to contact any number other than the contact and driver numbers specified in the form.`,
                pdfButton: "Save as PDF",
                resetButton: "Create New Reservation",
                confirmationText: "I confirm the accuracy of all the information I have entered. I accept full responsibility for any possible issues that may arise due to incomplete or incorrect entries."
            }
        };

        let currentLang = 'tr';

        // Update UI text based on selected language
        function translateUI() {
            const t = translations[currentLang];
            document.documentElement.lang = currentLang;
            document.getElementById('formTitle').textContent = t.formTitle;
            document.getElementById('guestInfoTitle').textContent = t.guestInfoTitle;
            document.getElementById('guestNameLabel').textContent = t.guestNameLabel;
            document.getElementById('flightInfoTitle').textContent = t.flightInfoTitle;
            document.getElementById('serviceTypeLabel').textContent = t.serviceTypeLabel;
            document.querySelector('#serviceType option[value=""]').textContent = t.selectServiceType;
            document.getElementById('arrivalServiceDateLabel').textContent = t.arrivalServiceDateLabel;
            document.getElementById('arrivalInfoText').textContent = t.arrivalInfoText;
            document.getElementById('arrivalFlightCodeLabel').textContent = t.arrivalFlightCodeLabel;
            document.getElementById('departureServiceDateLabel').textContent = t.departureServiceDateLabel;
            document.getElementById('departureFlightCodeLabel').textContent = t.departureFlightCodeLabel;
            document.getElementById('numberGuestsTitle').textContent = t.numberGuestsTitle;
            document.getElementById('adultCountLabel').textContent = t.adultCountLabel;
            document.getElementById('seniorCountLabel').textContent = t.seniorCountLabel;
            document.getElementById('childCountLabel').textContent = t.childCountLabel;
            document.getElementById('infantCountLabel').textContent = t.infantCountLabel;
            document.getElementById('specialRequestsTitle').textContent = t.specialRequestsTitle;
            document.getElementById('flowerGreetingLabel').textContent = t.flowerGreetingLabel;
            document.getElementById('cityTransferLabel').textContent = t.cityTransferLabel;
            document.getElementById('logoGreetingLabel').textContent = t.logoGreetingLabel;
            document.getElementById('gatTransferLabel').textContent = t.gatTransferLabel;
            document.getElementById('pickupDateLabel').textContent = t.pickupDateLabel;
            document.getElementById('pickupTimeLabel').textContent = t.pickupTimeLabel;
            document.getElementById('pickupAddressLabel').textContent = t.pickupAddressLabel;
            document.getElementById('otherRequestsLabel').textContent = t.otherRequestsLabel;
            document.getElementById('contactInfoTitle').textContent = t.contactInfoTitle;
            document.getElementById('authorizedPersonLabel').textContent = t.authorizedPersonLabel;
            document.getElementById('authorizedNumberLabel').textContent = t.authorizedNumberLabel;
            document.getElementById('driverNameLabel').textContent = t.driverNameLabel;
            document.getElementById('driverNumberLabel').textContent = t.driverNumberLabel;
            document.getElementById('contactInfoNote').textContent = t.contactInfoNote;
            document.getElementById('invoiceInfoTitle').textContent = t.invoiceInfoTitle;
            document.querySelector('.tab-button[data-tab="individual"]').textContent = currentLang === 'tr' ? "Bireysel" : "Individual";
            document.querySelector('.tab-button[data-tab="corporate"]').textContent = currentLang === 'tr' ? "Kurumsal" : "Corporate";
            document.getElementById('individualNameLabel').textContent = t.individualNameLabel;
            document.getElementById('identityNumberLabel').textContent = t.identityNumberLabel;
            document.getElementById('invoiceNameLabel').textContent = t.invoiceNameLabel;
            document.getElementById('taxOfficeLabel').textContent = t.taxOfficeLabel;
            document.getElementById('taxNumberLabel').textContent = t.taxNumberLabel;
            document.getElementById('invoiceAddressLabel').textContent = t.invoiceAddressLabel;
            document.getElementById('hasAccountNumberLabel').textContent = t.hasAccountNumberLabel;
            document.getElementById('accountNumberInputLabel').textContent = t.accountNumberInputLabel;
            document.getElementById('instructionsText').textContent = t.instructionsText;
            document.getElementById('pdfButton').textContent = t.pdfButton;
            document.getElementById('resetButton').textContent = t.resetButton;
            document.getElementById('confirmationTextLabel').textContent = t.confirmationText;
        }

        // Toggle flight info based on service type
        function toggleFlightInfo() {
            const serviceType = document.getElementById('serviceType').value;
            const arrivalInfo = document.getElementById('arrivalInfo');
            const departureInfo = document.getElementById('departureInfo');

            arrivalInfo.classList.add('hidden');
            departureInfo.classList.add('hidden');

            if (serviceType === 'arrival') {
                arrivalInfo.classList.remove('hidden');
            } else if (serviceType === 'departure') {
                departureInfo.classList.remove('hidden');
            } else if (serviceType === 'transit') {
                arrivalInfo.classList.remove('hidden');
                departureInfo.classList.remove('hidden');
            }
        }

        // Toggle city transfer info
        function toggleCityTransferInfo() {
            const cityTransferCheckbox = document.getElementById('cityTransfer');
            const cityTransferInfo = document.getElementById('cityTransferInfo');
            if (cityTransferCheckbox.checked) {
                cityTransferInfo.classList.remove('hidden');
            } else {
                cityTransferInfo.classList.add('hidden');
            }
        }

        // Toggle account number field
        function toggleAccountNumberField() {
            const hasAccountNumber = document.getElementById('hasAccountNumber');
            const accountNumberContainer = document.getElementById('accountNumberContainer');
            accountNumberContainer.style.display = hasAccountNumber.checked ? 'block' : 'none';
        }

        // Format flight code
        function formatFlightCode(input) {
            let value = input.value.trim().toUpperCase();
            value = value.replace(/[^A-Z0-9]/g, '');
            if (value.length >= 2) {
                let letters = value.substring(0, 2);
                let numbers = value.substring(2).padStart(4, '0');
                input.value = letters + numbers;
            } else {
                input.value = value;
            }
        }

        function formatDate(dateString) {
            if (!dateString) return '';
            const parts = dateString.split('.');
            if (parts.length !== 3) return dateString; 
            const [day, month, year] = parts;
            return `${day}.${month}.${year}`;
        }

        function translateServiceType(type) {
            if (currentLang === 'tr') {
                switch (type) {
                    case 'arrival':
                        return 'Gelen';
                    case 'departure':
                        return 'Giden';
                    case 'transit':
                        return 'Transit';
                    default:
                        return type;
                }
            } else {
                switch (type) {
                    case 'arrival':
                        return 'Arrival';
                    case 'departure':
                        return 'Departure';
                    case 'transit':
                        return 'Transit';
                    default:
                        return type;
                }
            }
        }

        function downloadPDF() {
            const { jsPDF } = window.jspdf;
            const doc = new jsPDF();

            doc.addFont('https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.1.66/fonts/Roboto/Roboto-Regular.ttf', 'Roboto', 'normal');
            doc.setFont('Roboto');

            // Header
            doc.setFillColor(212, 181, 149);
            doc.rect(0, 0, 210, 25, 'F');
            doc.setFontSize(18);
            doc.setTextColor(255, 255, 255);
            doc.text(currentLang === 'tr' ? "Meet & Greet Rezervasyon Formu" : "Meet & Greet Reservation Form", 105, 16, null, null, "center");

            // Gather form data
            const formData = new FormData(document.getElementById('reservationForm'));
            let data = [];

            const labelsMap = {};
            // Map all labels
            document.querySelectorAll('label[for]').forEach(labelEl => {
                labelsMap[labelEl.getAttribute('for')] = labelEl.textContent.replace(':','');
            });

            for (let [key, value] of formData.entries()) {
                if (!value || value.trim() === '') continue;
                const label = labelsMap[key];
                if (!label) continue;

                // Format special fields
                if (key.includes('Date')) {
                    value = formatDate(value);
                    if (!value) continue;
                }

                if (key === 'serviceType') {
                    value = translateServiceType(value);
                    if (value === translations[currentLang].selectServiceType) continue;
                }

                // Checkboxes
                if (['flowerGreeting','logoGreeting','cityTransfer','gatTransfer'].includes(key)) {
                    if (value === 'on') {
                        value = currentLang === 'tr' ? 'Evet' : 'Yes';
                        data.push([label, value]);
                    }
                    continue;
                }

                if (value && value.trim() !== '') {
                    data.push([label, value]);
                }
            }

            if (data.length > 0) {
                doc.autoTable({
                    body: data,
                    startY: 30,
                    theme: 'plain',
                    styles: {
                        font: 'Roboto',
                        fontSize: 10,
                        cellPadding: 2,
                        lineColor: [212,181,149],
                        lineWidth: 0.1,
                        valign: 'middle',
                        minCellHeight: 6
                    },
                    alternateRowStyles: {
                        fillColor: [240,235,230]
                    },
                    columnStyles: {
                        0: {
                            cellWidth: 90,
                            fontStyle: 'bold',
                            fillColor: [230,225,220]
                        },
                        1: {
                            cellWidth: 100
                        }
                    },
                    margin: { top: 45 }
                });

                const pageCount = doc.internal.getNumberOfPages();
                doc.setFontSize(8);
                doc.setTextColor(155,123,91);
                for (let i = 1; i <= pageCount; i++) {
                    doc.setPage(i);
                    doc.text(
                        'IGA Meet & Greet Services - ' + new Date().toLocaleDateString(),
                        105,
                        doc.internal.pageSize.height - 10,
                        null,
                        null,
                        'center'
                    );
                }

                doc.save(currentLang === 'tr' ? "meet_greet_rezervasyon_formu.pdf" : "meet_greet_reservation_form.pdf");
                activateResetButton();
            } else {
                alert(currentLang === 'tr' ? 'Lütfen en az bir alan doldurun.' : 'Please fill in at least one field.');
            }
        }

        function resetForm() {
            if (confirm(currentLang === 'tr' ? 'Tüm bilgiler silinecek. Emin misiniz?' : 'All information will be deleted. Are you sure?')) {
                document.getElementById('reservationForm').reset();
                document.getElementById('arrivalInfo').classList.add('hidden');
                document.getElementById('departureInfo').classList.add('hidden');
                document.getElementById('cityTransferInfo').classList.add('hidden');
                document.getElementById('accountNumberContainer').style.display = 'none';
                switchTab('individual');
                deactivateResetButton();
                document.getElementById('confirmationCheckbox').checked = false;
                document.getElementById('pdfButton').disabled = true;
            }
        }

        function activateResetButton() {
            const resetButton = document.getElementById('resetButton');
            resetButton.classList.add('active');
            resetButton.disabled = false;
        }

        function deactivateResetButton() {
            const resetButton = document.getElementById('resetButton');
            resetButton.classList.remove('active');
            resetButton.disabled = true;
        }

        function switchTab(tabName) {
            const tabs = document.querySelectorAll('.tab-button');
            const contents = document.querySelectorAll('.tab-content');

            tabs.forEach(tab => tab.classList.remove('active'));
            contents.forEach(content => content.classList.remove('active'));

            const activeTab = document.querySelector(`.tab-button[data-tab="${tabName}"]`);
            const activeContent = document.getElementById(`${tabName}Tab`);

            activeTab.classList.add('active');
            activeContent.classList.add('active');
        }

        function initializeDatePickers() {
            const dateInputs = [
                document.getElementById('arrivalServiceDate'),
                document.getElementById('departureServiceDate'),
                document.getElementById('pickupDate')
            ];

            dateInputs.forEach(input => {
                if (input) {
                    flatpickr(input, {
                        dateFormat: "d.m.Y",
                        allowInput: true,
                        parseDate: (datestr, format) => {
                            return flatpickr.parseDate(datestr, format);
                        },
                        formatDate: (date, format, locale) => {
                            return flatpickr.formatDate(date, format);
                        },
                        onClose: function(selectedDates, dateStr, instance) {
                            if (dateStr && !selectedDates[0]) {
                                const parts = dateStr.split('.');
                                if (parts.length === 3) {
                                    const day = parts[0].padStart(2, '0');
                                    const month = parts[1].padStart(2, '0');
                                    const year = parts[2].length === 2 ? `20${parts[2]}` : parts[2];
                                    instance.setDate(`${day}.${month}.${year}`, true, "d.m.Y");
                                }
                            }
                        }
                    });
                }
            });
        }

        function handleConfirmationCheckbox() {
            const checkbox = document.getElementById('confirmationCheckbox');
            const pdfButton = document.getElementById('pdfButton');
            pdfButton.disabled = !checkbox.checked;
        }

        document.addEventListener('DOMContentLoaded', function() {
            // Initialize language
            currentLang = document.getElementById('languageSelect').value;
            translateUI();
            initializeDatePickers();
            deactivateResetButton();
            document.getElementById('pdfButton').disabled = true;

            document.getElementById('languageSelect').addEventListener('change', () => {
                currentLang = document.getElementById('languageSelect').value;
                translateUI();
                toggleFlightInfo();
                toggleCityTransferInfo();
                toggleAccountNumberField();
                // Reset confirmation checkbox and PDF button state
                document.getElementById('confirmationCheckbox').checked = false;
                document.getElementById('pdfButton').disabled = true;
            });

            document.getElementById('serviceType').addEventListener('change', toggleFlightInfo);
            document.getElementById('cityTransfer').addEventListener('change', toggleCityTransferInfo);
            document.getElementById('hasAccountNumber').addEventListener('change', toggleAccountNumberField);
            document.getElementById('confirmationCheckbox').addEventListener('change', handleConfirmationCheckbox);

            const arrivalFlightCode = document.getElementById('arrivalFlightCode');
            if (arrivalFlightCode) {
                arrivalFlightCode.addEventListener('blur', function(){ formatFlightCode(this); });
            }

            const departureFlightCode = document.getElementById('departureFlightCode');
            if (departureFlightCode) {
                departureFlightCode.addEventListener('blur', function(){ formatFlightCode(this); });
            }

            document.getElementById('pdfButton').addEventListener('click', downloadPDF);
            document.getElementById('resetButton').addEventListener('click', resetForm);

            // Invoice tabs
            document.querySelectorAll('.tab-button').forEach(button => {
                button.addEventListener('click', () => {
                    switchTab(button.getAttribute('data-tab'));
                });
            });
        });
    </script>
</body>
</html>
